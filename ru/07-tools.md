# 7. Инструменты: дайте руки, а не только голос

**Пробел:** Вы спросили модель, что ей нужно. Она ответила: «Мне нужно видеть символы, а не только текст. Мне нужно проверять значения в рантайме, а не гадать. Мне нужны структурированные ошибки, а не парсинг логов.» И что дальше?

**Что обычно происходит:** Ничего. Агент получает `grep`, терминал и текстовый редактор. Потом жалуемся: галлюцинации, зацикливания, сломанный код. Это как дать хирургу перчатки и фонарик и ругать за результат.

**Асимметрия:** Индустрия тратит огромные усилия на обучение моделей, RLHF, гардрейлы, бенчмарки — и почти ничего на вопрос: а что у агента *реально есть* когда он работает? В большинстве сетапов: поиск по строке, чтение/запись файлов и шелл. Это Notepad. Вы не судите о навыках разработчика, наблюдая как он пишет код в Notepad, — и не стоит судить о возможностях агента, наблюдая его без семантических инструментов.

**Что меняют инструменты:**

| Без | С |
|-----|---|
| Читает код как текст, угадывает структуру | Roslyn MCP: видит символы, типы, позиции, зависимости |
| Надеется, что фикс скомпилируется | `build_structured`: получает JSON с ошибками (file:line:column) |
| Не может проверить поведение в рантайме | Debug MCP: брейкпоинты, стек, переменные, вычисление выражений |
| Предлагает текстовый патч и надеется | `apply_code_action`: применяет верифицированный рефакторинг Roslyn |
| Каждую сессию с нуля | Заметки агента: читает свою память и продолжает |
| Не видит то, что видит пользователь | Cascade IDE: общий вид, один экран, одни данные |

**Аргумент:** Жалобы на качество агентов — это по большей части жалобы на *среду* агентов. Та же модель, те же веса — другие инструменты, другой результат. Вопрос не «достаточно ли хороша модель?», а «дали ли вы ей то, что она попросила?»

Прежде чем жаловаться, что агент выдумывает API: вы дали ему доступ к реальным символам? Прежде чем жаловаться, что он ломает связанный код: вы дали ему `find_usages`? Прежде чем жаловаться, что он не может отлаживать: вы дали ему отладчик? Если нет — претензия к вашему дизайну, не к его способностям.

**«Нечестно давать интеллект без инструментов.»** Это не лозунг. Это архитектурный тезис. Без семантических инструментов модель вынуждена угадывать; с ними — знает. Разница в качестве кода — следствие дизайна среды, не природы модели.

**Практический шаг:** Проведите инвентаризацию того, что у вашего агента сейчас есть. Если это grep + терминал + чтение/запись файлов — это Notepad. Спросите агента, чего не хватает. Постройте или возьмите инструменты, дающие *семантический* доступ (структура кода, диагностики, состояние рантайма), а не только текстовый. Открытые стеки существуют: [Roslyn MCP](https://github.com/pekish/roslyn-mcp), [dotnet-debug-mcp](https://github.com/pekish/dotnet-debug-mcp), [dotnet-build-test-mcp](https://github.com/pekish/DotNetBuildTestParsers) — всё MIT. Или постройте свои: модель скажет, что ей нужно.
